{% load static %}

<div class="notification-item group flex items-start gap-4 px-4 lg:px-6 py-5 hover:bg-[#161b22] transition-all duration-200 cursor-pointer border-b border-[#21262d] last:border-0 border-l-[3px]
     {% if not notification.is_read %}border-l-[#2ea043] bg-[#161b22]/30{% else %}border-l-transparent bg-transparent{% endif %}"
     data-notification-id="{{ notification.id }}"
     onclick="handleNotificationClick({{ notification.id }}, '{% if notification.notification_type == 'follow' %}{% url 'user_profile' notification.actor.user.username %}{% elif notification.notification_type == 'comment' or notification.notification_type == 'reply' %}{% url 'view_log_in_feed' notification.target.sig %}?from=notification{% elif notification.notification_type == 'reaction' %}{% url 'view_log_in_feed' notification.target.sig %}?from=notification{% elif notification.notification_type == 'mention' or notification.notification_type == 'comment_mention' %}{% url 'view_log_in_feed' notification.target.sig %}?from=notification{% endif %}')">
    
    {# Combined Avatar and Type Icon - Instagram Style #}
    <div class="relative flex-shrink-0">
        <a href="{% url 'user_profile' notification.actor.user.username %}" onclick="event.stopPropagation();">
            <img src="{{ notification.actor.profile_image.url }}?v={{ notification.actor.updated_at.timestamp }}" 
                 class="w-10 h-10 sm:w-11 sm:h-11 rounded-full object-cover border-2 border-[#30363d] group-hover:border-[#2ea043] transition-colors duration-200" 
                 alt="{{ notification.actor.user.username }}">
        </a>
        
        {# Type Badge #}
        <div class="absolute -bottom-1 -right-1 w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center border-[3px] border-[#0d1117] group-hover:border-[#161b22] transition-colors duration-200
            {% if notification.notification_type == 'follow' %}bg-[#1f6feb] text-white
            {% elif notification.notification_type == 'comment' %}bg-[#8957e5] text-white
            {% elif notification.notification_type == 'reply' %}bg-[#da3633] text-white
            {% elif notification.notification_type == 'reaction' %}bg-[#da3633] text-white
            {% elif notification.notification_type == 'mention' or notification.notification_type == 'comment_mention' %}bg-[#d29922] text-white
            {% endif %}">
            <i class="text-[9px] sm:text-[9px]
                {% if notification.notification_type == 'follow' %}fa-solid fa-user-plus
                {% elif notification.notification_type == 'comment' %}fa-solid fa-comment
                {% elif notification.notification_type == 'reply' %}fa-solid fa-reply
                {% elif notification.notification_type == 'reaction' %}fa-solid fa-heart
                {% elif notification.notification_type == 'mention' or notification.notification_type == 'comment_mention' %}fa-solid fa-at
                {% endif %}"></i>
        </div>
    </div>
    
    {# Notification Content - Better typography and spacing #}
    <div class="flex-1 min-w-0 pt-0.5">
        <div class="text-[15px] leading-relaxed">
            {% if notification.notification_type == 'follow' %}
                {% include 'notifications/types/follow.html' %}
            {% elif notification.notification_type == 'comment' %}
                {% include 'notifications/types/comment.html' %}
            {% elif notification.notification_type == 'reply' %}
                {% include 'notifications/types/reply.html' %}
            {% elif notification.notification_type == 'reaction' %}
                {% include 'notifications/types/reaction.html' %}
            {% elif notification.notification_type == 'mention' %}
                {% include 'notifications/types/mention.html' %}
            {% elif notification.notification_type == 'comment_mention' %}
                {% include 'notifications/types/comment_mention.html' %}
            {% endif %}
        </div>
        
        {# Timestamp - Clean and separated #}
        <div class="mt-1.5 text-xs font-medium text-[#7d8590] flex items-center gap-2 opacity-60 group-hover:opacity-100 transition-opacity">
            <span>{{ notification.timestamp|timesince }} ago</span>
        </div>
    </div>
    
    {# Unread indicator - Subtle but visible #}
    {% if not notification.is_read %}
    <div class="flex-shrink-0 pl-2 mt-2">
        <div class="w-2.5 h-2.5 bg-[#2ea043] rounded-full ring-4 ring-[#2ea043]/10 shadow-[0_0_8px_rgba(46,160,67,0.4)]"></div>
    </div>
    {% endif %}
</div>
