{% load static %}
{% load custom_filter %}

{# What's Hot Now - Trending Logs Section #}
{% if trending_logs %}
<div class="w-full mb-4 min-[1110px]:mb-0">
    <!-- Header with Warm Aesthetic -->
    <div class="flex items-center justify-between mb-5 px-2 pb-3 border-b border-[#30363d]/30">
        <div class="flex items-center gap-2.5">
            <span class="relative flex h-2.5 w-2.5">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-60"></span>
                <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-amber-500 shadow-sm shadow-amber-500/40"></span>
            </span>
            <p class="text-xs font-semibold text-[#c9d1d9] uppercase tracking-wider">What's Hot Now?</p>
        </div>
        <span class="text-[9px] font-mono text-[#6e7681] bg-[#161b22]/50 px-2 py-0.5 rounded-md border border-[#30363d]/40">//hot</span>
    </div>
    
    <!-- Trending Logs List -->
    <div class="flex gap-4 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-[#30363d] scrollbar-track-transparent hover:scrollbar-thumb-[#484f58] 
                snap-x snap-mandatory min-[1110px]:flex-col min-[1110px]:overflow-visible min-[1110px]:pb-0 min-[1110px]:gap-3">
        {% for log in trending_logs %}
        <a href="{% url 'view_log_in_feed' log.sig %}?from=trending" 
           class="w-[300px] min-[1110px]:w-auto flex-shrink-0 snap-start
                  group flex items-start gap-4 p-4 rounded-xl bg-[#0f151d] hover:bg-[#1c2128]/80 
                  transition-all duration-300 cursor-pointer border border-[#30363d]/40 hover:border-[#444c56]/60 
                  relative hover:shadow-lg hover:shadow-black/10">
            
            <!-- Warm Left Accent -->
            <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-500/0 via-amber-500/40 to-amber-500/0 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded-l-xl"></div>
            
            <!-- Avatar with Soft Glow -->
            <div class="flex-shrink-0 relative">
                <div class="absolute -inset-0.5  rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-sm"></div>
                <img src="{{ log.user.profile_image.url }}?v={{ log.user.updated_at.timestamp }}" 
                     alt="{{ log.user.user.username }}"
                     class="relative w-11 h-11 rounded-full border-2 border-[#30363d]/60 group-hover:border-[#444c56] transition-all duration-300 object-cover shadow-sm">
            </div>
            
            <!-- Content (Prioritized) -->
            <div class="flex-1 min-w-0 space-y-2">
                <!-- User Info (De-emphasized) -->
                <div class="flex items-center justify-between">
                    <span class="font-medium text-[#8b949e] text-xs truncate group-hover:text-[#c9d1d9] transition-colors">
                        @{{ log.user.user.username }}
                    </span>
                    <span class="text-[9px] text-[#6e7681] flex-shrink-0 font-mono">
                        {{ log.timestamp|timesince_short }} ago
                    </span>
                </div>
                
                <!-- Log Content (Emphasized) -->
                <p class="text-[#c9d1d9] text-xs leading-relaxed line-clamp-2 group-hover:text-[#e6edf3] transition-colors font-normal">
                    {{ log.content|truncatechars:110 }}
                </p>
                
                <!-- Soft Engagement Metric -->
                <div class="flex items-center gap-2 pt-0.5">
                    <div class="flex items-center gap-1.5 bg-amber-500/5 px-2.5 py-1 rounded-full border border-amber-500/10">
                        <div class="w-3 h-3 rounded-full bg-amber-600 flex items-center justify-center shadow-sm shadow-amber-500/20">
                            <i class="fa-solid fa-bolt text-white text-[6px]"></i>
                        </div>
                        <span class="text-[10px] font-medium text-amber-600">
                            {{ log.total_engaged_users }}+ engaging
                        </span>
                    </div>
                    <span class="text-[9px] font-mono text-[#6e7681] opacity-0 group-hover:opacity-60 transition-all duration-300">
                        &gt;_
                    </span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}
